#@ s2: DakotaConfig=HAVE_C3
#@ s5: DakotaConfig=HAVE_C3

environment,
	output_precision = 16

method,
	model_pointer = 'HIERARCH'
        multifidelity_polynomial_chaos		#s0,#s3
#       multifidelity_stoch_collocation		#s1,#s4
#       multifidelity_function_train		#s2,#s5
	  p_refinement uniform
	    collocation_ratio = 1.5			#s0,#s2,#s3,#s5
	    seed = 8674132				#s0,#s2,#s3,#s5
# MF PCE:
	    expansion_order_sequence = 0 cross_validation	#s0,#s3
	    orthogonal_matching_pursuit	 			#s0,#s3
# MF SC:
#	    sparse_grid_level_sequence = 0			#s1,#s4
# MF FFT:
#	    start_rank_sequence  = 1 1 1 1		#s2,#s5
#	    start_order_sequence = 1 1 1 1		#s2,#s5
#	    increment_max_rank_order   	 		#s2,#s5
#	      adapt_rank  kick_rank  = 1 max_rank  = 3	#s2,#s5
#	      adapt_order kick_order = 1 max_order = 3	#s2,#s5
	  allocation_control greedy
	    max_cv_order_candidates = 2			#s0,#s2,#s3,#s5
#	    max_cv_rank_candidates  = 2			#s2,#s5
	    max_refinement_iterations = 10
	    refinement_metric covariance
	    convergence_tolerance = 1.e-6 relative	#s0,#s1,#s2	
#	    convergence_tolerance = 1.e-3 absolute	#s3,#s5
#	    convergence_tolerance = 1.e-2 absolute	#s4
	  final_moments central
	  normalized					#s0,#s3
	output silent

model,
	id_model = 'HIERARCH'
	variables_pointer = 'LF_VARS'
	surrogate ensemble
	  ordered_model_fidelities = 'HF' #'LF'
	  correction additive zeroth_order

model,
	id_model = 'LF'
	variables_pointer = 'LF_VARS'
	simulation
	  solution_level_control = 'N_x'
#	  solution_level_cost = 375. 10125. 81000. 648000.
          cost_recovery_metadata = 'cost_model'

model,
	id_model = 'HF'
	variables_pointer = 'HF_VARS'
	simulation
	  solution_level_control = 'N_x'
#	  solution_level_cost = 5.67e+5 4.536e+6 2.1e+7 1.68e+8
          cost_recovery_metadata = 'cost_model'

variables,
	id_variables = 'LF_VARS'
	uniform_uncertain = 7
	  lower_bounds    = 7*-1.
	  upper_bounds    = 7* 1.
	discrete_state_set
	  integer = 2
	    num_set_values = 4 1
	    set_values = 5 15 30 60 # number of spatial coords
	    	       	 3 	    # number of Fourier solution modes
	    initial_state = 5 3
	    descriptors 'N_x' 'N_mod'

variables,
	id_variables = 'HF_VARS'
	uniform_uncertain = 7
	  lower_bounds    = 7*-1.
	  upper_bounds    = 7* 1.
	discrete_state_set
	  integer = 2
	    num_set_values = 4 1
	    set_values = 30 60 100 200 # number of spatial coords
	    	       	 21 	       # number of Fourier solution modes
	    initial_state = 30 21
	    descriptors 'N_x' 'N_mod'

interface,
	direct
	  analysis_driver = 'transient_diffusion_1d'
#	  deactivate evaluation_cache restart_file

responses,
	response_functions = 1
	no_gradients
	no_hessians
        metadata 'cost_model'
